{% extends "layout.html" %}
{% block body %}
<div class="row">
  <div class="col-lg-12">
    <div class="page-header">
      <h2>Profile</h2>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-4">
    <p><img src="https://www.gravatar.com/avatar/{{ user.gravatar }}?s=140"/ class="img-circle"><p/>
    <p><strong>{{ user.fullname }}</strong></p>
    <p><i class="fa fa-user" aria-hidden="true"></i> {{ user.name }}<p/>
    <p><i class="fa fa-envelope-o" aria-hidden="true"></i> <a href="mailto:{{ user.email }}">{{ user.email }}</a></p>
  </div>
  <div class="col-md-8">
    {% for access in accesses %}
      <h3>
        <a href="/user/{{ access.user.name }}">{{ access.user.name }}</a> /
        <a href="/user/{{ access.user.name }}/{{ access.dataset.name }}">{{ access.dataset.name }}</a>
      </h3>
      {% if access.dataset.description %}
      <p>{{ access.dataset.description }}</p>
      {% endif %}
    {% endfor %}
  </div>
</div>
{% if user == current_user %}
<div class="row">
  <div class="col-lg-12">
    <h3>Token</h3>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    {% if not current_user.token %}
    <a href="/user/token/generate" type="button" class="btn btn-primary">Generate</a>
    {% else %}
    <p>Use <strong>{{ current_user.token }}</strong> for authentication.</p>
    <p><a href="/user/token/revoke" type="button" class="btn btn-default">Revoke</a></p>
    {% endif %}
  </div>
</div>
{% endif %}
{% endblock %}
